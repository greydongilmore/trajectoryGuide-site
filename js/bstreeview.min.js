/*
 @preserve
 bstreeview.js
 Version: 1.0.0
 Authors: Sami CHNITER <sami.chniter@gmail.com>
 Copyright 2020
 License: Apache License 2.0

 Project: https://github.com/chniter/bstreeview
*/
(function(a,l,n,p){function g(b,c){this.element=b;this.itemIdPrefix=b.id+"-item-";this.settings=a.extend({},m,c);this.init()}var m={expandIcon:"fa fa-angle-down",collapseIcon:"fa fa-angle-right",indent:1.25};a.extend(g.prototype,{init:function(){this.tree=[];this.nodes=[];this.settings.data&&(this.settings.data=a.parseJSON(this.settings.data),this.tree=a.extend(!0,[],this.settings.data),delete this.settings.data);a(this.element).addClass("bstreeview");this.initData({nodes:this.tree});var b=this;this.build(a(this.element),
this.tree,0);a(".bstreeview").on("click",".list-group-item",function(c){a(".state-icon",this).toggleClass(b.settings.expandIcon).toggleClass(b.settings.collapseIcon);c=c.target;if(c=c.hasAttribute("href")?c.getAttribute("href"):null)l.location=c})},initData:function(b){if(b.nodes){var c=this;a.each(b.nodes,function(a,e){e.nodeId=c.nodes.length;e.parentId=b.nodeId;c.nodes.push(e);e.nodes&&c.initData(e)})}},build:function(b,c,h){var e=this,g="1.25rem;";0<h&&(g=(e.settings.indent+h*e.settings.indent).toString()+
"rem;");h+=1;a.each(c,function(c,d){var f=a('<div class="list-group-item" data-toggle="collapse"></div>').attr("data-target","#"+e.itemIdPrefix+d.nodeId).attr("style","padding-left:"+g);if(d.nodes){var k=a('<i class="state-icon"></i>').addClass(e.settings.collapseIcon);f.append(k)}d.icon&&(k=a('<i class="item-icon"></i>').addClass(d.icon),f.append(k));f.append(d.text);d.href&&f.attr("href",d.href);d["class"]&&f.addClass(d["class"]);d.id&&f.attr("id",d.id);jQuery.fn.extend({bstreeCollapse:function(c){var b=
this.next(".list-group"),d;"show"!==c||b.hasClass("show")?"hide"===c&&b.hasClass("show")&&(d=b.collapse("hide")):d=b.collapse("show");d&&a(".state-icon",this).toggleClass(e.settings.expandIcon).toggleClass(e.settings.collapseIcon);return this},bstreeItemDisable:function(a){a?this.addClass("disabled"):this.removeClass("disabled");return this}});b.append(f);d.nodes&&(f=a('<div class="list-group collapse" id="itemid"></div>').attr("id",e.itemIdPrefix+d.nodeId),b.append(f),e.build(f,d.nodes,h))})}});
a.fn.bstreeview=function(b){return this.each(function(){a.data(this,"plugin_bstreeview")||a.data(this,"plugin_bstreeview",new g(this,b))})}})(jQuery,window,document);