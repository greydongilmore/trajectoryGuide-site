


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <meta name="author" content="Greydon Gilmore">
      
      <link rel="shortcut icon" href="../img/trajectoryGuide_icon.svg">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-5.3.2">
    
    
      
        <title>Registration</title>
      
    
    
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <link rel="stylesheet" href="../css/bstreeview.min.css">
    
      <link rel="stylesheet" href="../assets/stylesheets/main.545621a7.min.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/palette.36d1b78f.min.css">
      
      
        
        
        <meta name="theme-color" content="#ef5350">
      
    

    
    
  <script
    src="https://code.jquery.com/jquery-3.4.1.min.js"
    integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
    crossorigin="anonymous"></script>
<!--  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> -->
<!--  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script> -->
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/7e31cfd31d.js" crossorigin="anonymous"></script>
    <script src="../js/bstreeview.min.js"></script>

    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="none" data-md-color-primary="red" data-md-color-accent="red">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#patient-space-registration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href=".." title="trajectoryGuide v1.0" class="md-header-nav__button md-logo" aria-label="trajectoryGuide v1.0">
      
  <img src="../img/trajectoryGuide.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            trajectoryGuide v1.0
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Registration
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/trajectoryGuide/trajectoryGuide-site/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="trajectoryGuide v1.0" class="md-nav__button md-logo" aria-label="trajectoryGuide v1.0">
      
  <img src="../img/trajectoryGuide.png" alt="logo">

    </a>
    trajectoryGuide v1.0
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/trajectoryGuide/trajectoryGuide-site/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../index.html" title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../installation.html" title="Installation" class="md-nav__link">
      Installation
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Working in 3D Slicer
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Working in 3D Slicer" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Working in 3D Slicer
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../3dslicer/01_interface.html" title="User Interface" class="md-nav__link">
      User Interface
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../3dslicer/02_saving_data.html" title="Saving Data" class="md-nav__link">
      Saving Data
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Modules
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Modules" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Modules
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="00_overview.html" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="01_patient_directory.html" title="Patient Directory" class="md-nav__link">
      Patient Directory
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="04_frame_detection.html" title="Frame Detection" class="md-nav__link">
      Frame Detection
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Registration
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="05_registration.html" title="Registration" class="md-nav__link md-nav__link--active">
      Registration
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#patient-space-registration" class="md-nav__link">
    Patient Space Registration
  </a>
  
    <nav class="md-nav" aria-label="Patient Space Registration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#registration-settings" class="md-nav__link">
    Registration Settings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-registration-results" class="md-nav__link">
    Check Registration Results
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#algorithms" class="md-nav__link">
    Algorithms
  </a>
  
    <nav class="md-nav" aria-label="Algorithms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#niftyreg-reg_aladin" class="md-nav__link">
    NiftyReg - reg_aladin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ants-antsregistrationsynquick" class="md-nav__link">
    ANTS - antsRegistrationSyNQuick
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fsl-flirt" class="md-nav__link">
    FSL - flirt
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ants-antsregistration" class="md-nav__link">
    ANTS - antsRegistration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#template-space-registration" class="md-nav__link">
    Template Space Registration
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="06_anatomical_fiducials.html" title="Anatomical Fiducials" class="md-nav__link">
      Anatomical Fiducials
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../about.html" title="About" class="md-nav__link">
      About
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#patient-space-registration" class="md-nav__link">
    Patient Space Registration
  </a>
  
    <nav class="md-nav" aria-label="Patient Space Registration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#registration-settings" class="md-nav__link">
    Registration Settings
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#check-registration-results" class="md-nav__link">
    Check Registration Results
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#algorithms" class="md-nav__link">
    Algorithms
  </a>
  
    <nav class="md-nav" aria-label="Algorithms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#niftyreg-reg_aladin" class="md-nav__link">
    NiftyReg - reg_aladin
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ants-antsregistrationsynquick" class="md-nav__link">
    ANTS - antsRegistrationSyNQuick
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#fsl-flirt" class="md-nav__link">
    FSL - flirt
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ants-antsregistration" class="md-nav__link">
    ANTS - antsRegistration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#template-space-registration" class="md-nav__link">
    Template Space Registration
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
  
    <a href="https://github.com/trajectoryGuide/trajectoryGuide-site/blob/master/docs/widgets/05_registration.md" title="Edit this page" class="md-content__button md-icon" target="blank_" style="font-size: 14px;">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg> <p style="margin-top:2px;">Edit this page</p>
    </a>
    <a href="https://github.com/greydongilmore/edf2bids-site/issues/new/choose" title="Open an issue" class="md-content__button md-icon" target="blank_" style="font-size: 14px;">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> <p style="margin-top:2px;">Open and issue</p>
    </a>
  
  
    
  
  
    <h1>Registration</h1>
  
  <h2 id="patient-space-registration">Patient Space Registration<a class="headerlink" href="#patient-space-registration" title="Permanent link">&para;</a></h2>
<p>All registrations with patient scans will be rigid registrations. With some of the more advanced algorithms you can override this and run non-linear registration but it is strongly discouraged. See the below <a href="05_registration.html#algorithm"><strong>Algorithms</strong></a> to learn more about each algorithm and the respective settings.</p>
<p><center>
    <figure>
        <img src="img/patient_space_registration.png" alt="patient_space_registration"/>
        <figcaption>Patient space registration settings.</figcaption>
    </figure>
</center></p>
<h3 id="registration-settings">Registration Settings<a class="headerlink" href="#registration-settings" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Reference Volume:</strong> the scan that all other scans will be registered to (generally the pre-operative T1w scan).</li>
<li><strong>Frame Volume:</strong> the scan that contains the sterotactic frame (either MRI or CT).</li>
<li><strong>Floating volumes:</strong> the scans that will be co-registered to the reference volume. You can un-check any scans you do not want registered, all scans checked in this drop-down box will be registered.</li>
</ul>
<p>Within the <strong>Reference Volume</strong> drop-down box, select the scan you want to co-register all other scans to (Reference). In the <strong>Frame Volume</strong> drop-down box, select the scan that contains the stereotactic fiducials. In the <strong>Floating Volumes</strong> drop-down box, all other scans (floating) will be checked to indicate they will be registered to the reference. If there are any floating scans you do not want registered, uncheck them.</p>
<p><center>
    <figure>
        <img src="img/patient_space_floating_volumes.png" alt="patient_space_dropdowns"/>
        <figcaption>Patient space drop-down volume boxes.</figcaption>
    </figure>
</center></p>
<p>To begin the registration, press the <strong>Run Registration</strong> button. The <strong>Registration Process</strong> box will display updated information during the registration. When the registration is complete, the view will be automatically changed to a compare view.</p>
<p><center>
    <figure>
        <img src="img/registration_status_box.png" alt="registration_status_box"/>
        <figcaption>Patient space drop-down volume boxes.</figcaption>
    </figure>
</center></p>
<h3 id="check-registration-results">Check Registration Results<a class="headerlink" href="#check-registration-results" title="Permanent link">&para;</a></h3>
<p>For each registration you will either select <span style="color:green"><strong>Confirm Registration</strong></span> or <span style="color:red"><strong>Decline Registration</strong></span>. If you choose to decline a registration, the registration can be re-run with a different algorithm. To check the registration, it is helpful to use the opacity slider to change the opacity of the foreground scan (floating scan).</p>
<p><center>
    <figure>
        <img src="img/registration_compare.png" alt="registration_opacity_slider"/>
        <figcaption>Patient space drop-down volume boxes.</figcaption>
    </figure>
</center></p>
<p>You can also use the <strong>Layer Reveal</strong> tool to check the registration in more detail. This tool displays a square that contains half the foreground scan and half the background scan.</p>
<p><center>
    <figure>
        <img src="img/layer_reveal.png" alt="layer_reveal"/>
        <figcaption>Registration layer reveal tool.</figcaption>
    </figure>
</center></p>
<p>When finished checking the registrations, any confirmed registered scans will disappear from the <strong>Floating Volumes</strong> drop-down box, declined scans will still appear in the drop-down box. To re-run the registration, update any settings and press the <strong>Run Registration</strong> button, all previous registration information, for the current floating scans, will be erased.</p>
<h2 id="algorithms">Algorithms<a class="headerlink" href="#algorithms" title="Permanent link">&para;</a></h2>
<p>The default algorithm will be NiftyReg using nearest neighbor interpolation when applying the transform. You are able to change the registration algorithm and parameters according to the following information.</p>
<h3 id="niftyreg-reg_aladin">NiftyReg - reg_aladin<a class="headerlink" href="#niftyreg-reg_aladin" title="Permanent link">&para;</a></h3>
<p>For information about this algorithm you can visit <a href="https://www.nitrc.org/projects/niftyreg/" target="_blank">this page</a>.</p>
<ul>
<li><strong>interpolation order:</strong> nearest neighbor, cubic, sinc, linear (default nearest neighbor)</li>
</ul>
<h3 id="ants-antsregistrationsynquick">ANTS - antsRegistrationSyNQuick<a class="headerlink" href="#ants-antsregistrationsynquick" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>transform type:</strong> rigid, rigid+affine, rigid+affine+syn, rigid+syn, rigid+affine+b-spl syn, rigid+b-spl syn<ul>
<li><strong>rigid:</strong> rigid (1 stage)</li>
<li><strong>rigid+affine:</strong> rigid + affine (2 stages)</li>
<li><strong>rigid+affine+syn:</strong> rigid + affine + deformable syn (3 stages)</li>
<li><strong>rigid+syn:</strong> rigid + deformable syn (2 stages)</li>
<li><strong>rigid+affine+b-spl syn:</strong> rigid + affine + deformable b-spline syn (3 stages)</li>
<li><strong>rigid+b-spl syn:</strong> rigid + deformable b-spline syn (2 stages)</li>
</ul>
</li>
<li><strong>threads:</strong> number of threads to use</li>
<li><strong>cc radius:</strong> histogram bins for mutual information in SyN stage (default = 32)</li>
<li><strong>spline distance:</strong> spline distance for deformable B-spline SyN transform (default = 26)</li>
<li><strong>histogram matching:</strong> use histogram matching (default = 0)</li>
</ul>
<h3 id="fsl-flirt">FSL - flirt<a class="headerlink" href="#fsl-flirt" title="Permanent link">&para;</a></h3>
<p>For information about this algorithm you can visit <a href="https://fsl.fmrib.ox.ac.uk/fsl/fslwiki/FLIRT/UserGuide" target="_blank">this page</a>.</p>
<ul>
<li><strong>interpolation order:</strong> nearest neighbor, spline, sinc, trilinear (default trilinear)</li>
<li><strong>cost:</strong> used during the second stage. Options are: mutual info, correlation ratio, least square, normalized correlation, normalized mutual info (default corratio)</li>
<li><strong>search cost:</strong> used during initial search stage. Options are: mutual info, correlation ratio, least square, normalized correlation, normalized mutual info (default corratio)</li>
<li><strong>coarse search:</strong> search delta angle to use during initial alignment between the images (default 60)</li>
<li><strong>fine search:</strong>  search delta angle to use during final alignment between the images (default 18)</li>
</ul>
<h3 id="ants-antsregistration">ANTS - antsRegistration<a class="headerlink" href="#ants-antsregistration" title="Permanent link">&para;</a></h3>
<p>For information about this algorithm you can visit <a href="https://www.nitrc.org/projects/ants" target="_blank">this page</a>.</p>
<p>This algorithm gives the user more control over each step. The user can specify the "stages" of registration, where a stage consists of a transform and an image metric. Each stage consists of levels with specific values set for iterations, shrink factors, and smoothing sigmas.</p>
<ul>
<li><strong>interpolation:</strong> applied only to the output image. Options are: linear, nearest neighbor, bspline, cosinc, hammingsinc  (default nearest neighbor)</li>
<li><strong>metric:</strong> CC,MI,GC   (CC)<ul>
<li><strong>CC:</strong> ANTS neighborhood cross correlation</li>
<li><strong>MI:</strong> Mutual information</li>
<li><strong>GC:</strong> Global Correlation</li>
</ul>
</li>
<li><strong>gradient step:</strong> how big the mutual info, correlation ratio, least square, normalized correlation, normalized mutual info  (default 0.1)</li>
<li><strong>convergence:</strong> for each hierarchical step, this value specifies the threshold that is needed to be met before stopping the respective step  (default 1000x500x250x100x0,1e-6,10)</li>
<li><strong>shrink:</strong> shrink factor for each hierarchical step  (default 8x4x2x2x1)<ul>
<li>i.e. for an image with 256x256x256 voxels, the levels will work on images of size 32mm, 64mm, 128mm, and 256mm</li>
</ul>
</li>
<li><strong>smoothing:</strong> smoothing factor applied in each hierarchical step  (default 3x2x1x0x0vox)</li>
</ul>
<h2 id="template-space-registration">Template Space Registration<a class="headerlink" href="#template-space-registration" title="Permanent link">&para;</a></h2>
<p>Click <code>Run Registration</code>. The registration progression will be updated within the <code>Registration Progress</code> window. Once registration is completed, you will see the co-registered volumes appear in the floating drop-down box (under <code>Co-registered Volumes</code>).</p>
<p>You will now confirm that the registration results by clicking the <code>Compare Volumes</code> button. For each registration you will either select <code>Confirm Registration</code> or <code>Decline Registration</code>. If you choose to decline a registration, you will be able to re-run the registration with a different algorithm.</p>
<p><br>
<br>
<br></p>
  
    
  

              
                


              
            </article>
          </div>
        </div>
      </main>
      
  <!--
  Copyright (c) 2016-2020 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->



<!-- Application footer -->
<footer class="md-footer">

  <!-- Link to previous and/or next page -->
  
    <div class="md-footer-nav">
      <nav
        class="md-footer-nav__inner md-grid"
        aria-label="Footer"
      >

        <!-- Link to previous page -->
        
          <a
            href="04_frame_detection.html"
            title="Frame Detection"
            class="md-footer-nav__link md-footer-nav__link--prev"
            rel="prev"
          >
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Frame Detection
              </div>
            </div>
          </a>
        

        <!-- Link to next page -->
        
          <a
            href="06_anatomical_fiducials.html"
            title="Anatomical Fiducials"
            class="md-footer-nav__link md-footer-nav__link--next"
            rel="next"
          >
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Anatomical Fiducials
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  

  <!-- Further information -->
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">

      <!-- Copyright and theme information -->
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2021 Greydon Gilmore
          </div>
        
      </div>

      <!-- Social links -->
      
    </div>
  </div>
</footer>

    </div>
    
      <script src="../assets/javascripts/vendor.de50e36d.min.js"></script>
      <script src="../assets/javascripts/bundle.dd72b84b.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "..",
          features: [],
          search: Object.assign({
            worker: "../assets/javascripts/worker/search.9b3611bd.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://unpkg.com/mermaid@8.4.4/dist/mermaid.min.js"></script>
      
    
  </body>
</html>